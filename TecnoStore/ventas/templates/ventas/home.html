{% load static %} {% load humanize %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Tecnomarket</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-qN/VKwxLBzME2YkdE+5E/VPLkZXl2b7xvFeoJq6Digw1k3D6Z0fjQX+0Gooy2cwr"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/bxslider/4.2.15/jquery.bxslider.css"
    />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="{% static  'app/css/estilos.css' %}" />
    <link rel="stylesheet" href="{% static 'app/css/productos.css'%}" />
  </head>
  <body>
    <header id="header">
      <img
        src="{% static 'app/img/menuiconwhite.png' %}"
        alt="menu"
        class="menu"
        id="menu"
      />
      <div class="contenedor_logo">
        <img src="{% static 'app/img/logo1.png' %}" alt="logo" class="logo" />
      </div>
      <div>
        <nav id="nav">
          <ul>
            <li>
              <a href="{% url 'home' %}l">Inicio</a>
            </li>

            <li>
              <a href="{% url 'home'%}">Carrito</a>
            </li>
            {% if perms.app.add_producto %}

            <li>
              <a href="{% url 'agregar_productos' %}">Agregar Producto</a>
            </li>

            {% endif %} {% if perms.app.view_producto %}
            <li>
              <a href="{% url 'listar_productos'%}">Listar Productos</a>
            </li>
            {% endif %}

            <li>
              <a href="#">@{{ user.username }} </a>
            </li>
            {% if user.is_authenticated %}
            <li>
              <a href="{% url 'logout' %}">Cerrar Session</a>
            </li>
            {% else %}
            <li>
              <a href="{% url 'login' %}">Iniciar Sesion</a>
            </li>
            <li>
              <a href="{% url 'registro' %}"></a>
            </li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </header>

    <div id="contenido">
      <div
        id="carouselExampleIndicators"
        class="carousel slide"
        data-bs-ride="carousel"
      >
        <div class="carousel-indicators">
          {% for p in productos %}
          <button
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide-to="{{ forloop.counter0 }}"
            {%
            if
            forloop.first
            %}class="active"
            aria-current="true"
            {%
            endif
            %}
            aria-label="Slide {{ forloop.counter }}"
          ></button>
          {% endfor %}
        </div>
        <div class="carousel-inner">
          {% for p in productos %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <div
              class="d-flex justify-content-center align-items-center"
              style="height: 400px; background-color: #333"
            >
              {% if p.imagen %}
              <img
                src="{{ p.imagen.url }}"
                class="d-block w-50"
                alt="{{ p.nombre }}"
                style="max-height: 100%; object-fit: contain"
              />
              {% else %}
              <p style="color: white">Imagen no disponible</p>
              {% endif %}
            </div>
            <div class="carousel-caption d-none d-md-block">
              <h5>{{ p.nombre | title }}</h5>
              <p>${{ p.precio | intcomma }}</p>
              <a href="{% url 'home' %}" class="btn btn-primary"
                >Ver Producto</a
              >
            </div>
          </div>
          {% empty %}
          <div class="carousel-item active">
            <div
              class="d-flex justify-content-center align-items-center"
              style="height: 400px; background-color: #333"
            >
              <p style="color: white">
                No hay productos disponibles para mostrar en el carrusel.
              </p>
            </div>
          </div>
          {% endfor %}
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>

    <footer>
      <footer>
        <div class="marcas">
          <img
            src="{% static 'app/img/footer/apple.png' %}"
            alt="apple"
            style="width: 30px"
          />
          <img src="{% static 'app/img/footer/lenovo.png' %}" alt="lenovo" />
          <img
            src="{% static 'app/img/footer/microsoft.png' %}"
            alt="microsoft"
          />
          <img src="{% static 'app/img/footer/samsung.png' %}" alt="samsung" />
          <img src="{% static 'app/img/footer/xiaomi.png' %}" alt="xiaomi" />
        </div>
        <div class="logo_footer">
          <img src="{% static 'app/img/logo1.png' %}" alt="logo" />
        </div>
      </footer>
    </footer>

    <script src="{% static 'app/js/menu.js' %}"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
